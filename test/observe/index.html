<!DOCTYPE html>
<html>
<head>
  <title>Notify Observer page</title>

  <script type="text/javascript" src="/rdb2js/vendor/labjs/LAB.js"></script>
  <script>
    function hasPromises() {
      var e = window;
      return "Promise" in e &&
          "resolve" in e.Promise && "reject" in e.Promise &&
          "all" in e.Promise && "race" in e.Promise &&
          function () {
            var n;
            new e.Promise(function (e) {
              n = e
            });
            return "function" == typeof n;
          }()
    }

    function hasFetch() {
      return "fetch" in window;
    }

    var $L = $LAB
        .script('/rdb2js/vendor/reconnecting-websocket/reconnecting-websocket.js').wait()
        .script('/rdb2js/vendor/tiny-emitter/dist/tinyemitter.js')
        .script('/rdb2js/lib/js/us.js').wait()
        .script('/rdb2js/lib/js/rdbhost.js').wait()
        .script('/rdb2js/test/private.js')
        .script('/rdb2js/lib/js/rdbhost_livereload.js').wait();

    if ( !hasPromises() )
      $L = $L.script('/rdb2js/vendor/es6-promises/dist/es6-promise.js');
    if ( !hasFetch() )
      $L = $L.script('/rdb2js/vendor/fetch/fetch.js').wait();
    $L = $L.wait(function() {
      Rdbhost.connect(domain, 14);
      var preauth = Rdbhost.preauth();
    });

    $L =  $L.wait().script('/rdb2js/lib/js/rdbhost_livereload.js');
  </script>

  <!-- Your tests file goes here -->
  <!-- script>
    Rdbhost.connect(domain, 14);
    var preauth = Rdbhost.preauth();

  </script -->
</head>
  <body>
    <h1 id="qunit-header">Preauth</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
  </body>
</html>
