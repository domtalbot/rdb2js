<!DOCTYPE html>
<html>
<head>

  <style>
    body {
      background-color: red;
      top: 180px;
      bottom: 180px;
      padding: 80px;
      margin-top: 80px;
      margin-left: -80px;
      margin-right: -80px;
      width: 6px;
      color: white;
    }
    #links {
      margin-left: 40px;
      margin-top: 10px;
      padding: 8px;
    }
  </style>

  <title>Dialog Stress Page</title>
  <script type="text/javascript" src="http://dev.rdbhost.com/vendor/labjs/LAB.js"></script>
  <script>
    function hasPromises() {
      var e = window;
      return "Promise" in e &&
          "resolve" in e.Promise && "reject" in e.Promise &&
          "all" in e.Promise && "race" in e.Promise &&
          function () {
            var n;
            new e.Promise(function (e) {
              n = e
            });
            return "function" == typeof n;
          }()
    }

    function hasFetch() {
      return "fetch" in window;
    }

    var $L = $LAB
        .script('http://dev.rdbhost.com/vendor/rdbhost/2.0/lib/js/rdbhost-bundle.js')
        .script('private.js').wait()
        .script('http://dev.rdbhost.com/vendor/rdbhost/2.0/lib/js/rdbhost_livereload.js');

    if ( !hasPromises() )
      $L = $L.script('http://dev.rdbhost.com/vendor/rdbhost/2.0/vendor/es6-promises/dist/es6-promise.js');
    if ( !hasFetch() )
      $L = $L.script('http://dev.rdbhost.com/vendor/rdbhost/2.0/vendor/fetch/fetch.js').wait();
    $L = $L.wait(function() {
      Rdbhost.connect(domain, 14);
      var preauth = Rdbhost.preauth();
      Rdbhost.activate_reloader(preauth);
    });

    $L.wait(function() {

      // ## edit the localhost line to show path to templates.  must end in '/'
      var path = window.location.toString();
      path = path.replace(/\w+.html/g,'');

      Rdbhost.connect(domain, 14, path+'dialog/');
      var preauth = Rdbhost.preauth();

      var p = preauth.query('SELECT 123; \n\n SELECT \'abc\'; UPDATE whatever SET a=1;\n\nINSERT INTO wherever (b) VALUES(2);').go();
      p.catch(function(e) {
        alert(e);
      })
    })
  </script>

  <!-- Your tests file goes here -->
</head>
  <body>
  !Hola!
  <div id="links">
    <a href="dialogstress1.html">one</a>
    <a href="dialogstress2.html">two</a>
    <a href="dialogstress3.html">three</a>
  </div>
  </body>
</html>
